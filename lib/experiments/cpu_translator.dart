import 'cpu_intent.dart';

/// ğŸ§  CPU Ù…ØªØ±Ø¬Ù…
/// Ú©Ø§Ù…: Ø³ÙˆØ§Ù„ Ú©Ùˆ Ø³Ù…Ø¬Ú¾ Ú©Ø± NPU Ú©Ùˆ ØµØ­ÛŒØ­ Ø¯Ù…Ø§ØºÛŒ Ù…ÙˆÚˆ Ø¯ÛŒÙ†Ø§
class CPUTranslator {

  CPUIntent detectIntent(String question) {
    if (question.trim().isEmpty) {
      return CPUIntent.general;
    }

    final q = question.toLowerCase().trim();

    // =========================
    // 1ï¸âƒ£ Ø±ÛŒØ§Ø¶ÛŒ â†’ GPU
    // =========================
    if (_containsAny(q, [
      'Ø¬Ù…Ø¹', 'Ø¶Ø±Ø¨', 'ØªÙ‚Ø³ÛŒÙ…', 'Ù…Ù†ÙÛŒ', 'Ø¨Ù¹Ø§',
      'Ú©ØªÙ†Û’', 'Ø¨Ø±Ø§Ø¨Ø±', 'Ø­Ø³Ø§Ø¨',
      '+', '-', '*', '/',
      'Ø¯Ùˆ Ø¬Ù…Ø¹ Ø¯Ùˆ', 'ØªÛŒÙ† Ø¶Ø±Ø¨ Ú†Ø§Ø±'
    ])) {
      return CPUIntent.math;
    }

    // =========================
    // 2ï¸âƒ£ Ú©ÙˆØ§Ù†Ù¹Ù… â†’ NPU + Quantum Logic
    // =========================
    if (_containsAny(q, [
      'Ú©ÙˆØ§Ù†Ù¹Ù…', 'quantum',
      'Ø³Ù¾Ø± Ù¾ÙˆØ²ÛŒØ´Ù†',
      'Ø§ÛŒÙ†Ù¹ÛŒÙ†Ú¯Ù„Ù…Ù†Ù¹',
      'Ø´Ø±ÙˆÚˆÙ†Ú¯Ø±',
      'Ø¨Ù„ÛŒ', 'qubit'
    ])) {
      return CPUIntent.quantum;
    }

    // =========================
    // 3ï¸âƒ£ Ú¯ÛØ±Ø§ ÙÙ„Ø³ÙÛ (âš ï¸ Ø§ÛÙ…)
    // =========================
    if (_containsAny(q, [
      'Ú©Ø§Ø¦Ù†Ø§Øª Ú©Ø§ Ø±Ø§Ø²',
      'Ú©Ø§Ø¦Ù†Ø§Øª Ú©ÛŒÙˆÚº',
      'ÙˆØ¬ÙˆØ¯ Ú©ÛŒØ§ ÛÛ’',
      'Ø­Ù‚ÛŒÙ‚Øª Ú©ÛŒØ§ ÛÛ’',
      'Ø§Ù†Ø³Ø§Ù† Ú©ÛŒØ§ ÛÛ’',
      'Ø²Ù†Ø¯Ú¯ÛŒ Ú©ÛŒØ§ ÛÛ’',
      'Ù…ÙˆØª Ú©ÛŒØ§ ÛÛ’',
      'Ø¹Ù‚Ù„ Ú©ÛŒØ§ ÛÛ’',
      'Ø¯Ù…Ø§Øº Ú©ÛŒØ§ ÛÛ’'
    ])) {
      return CPUIntent.philosophy;
    }

    // =========================
    // 4ï¸âƒ£ Ù…Ù†Ø·Ù‚ / Ù¾ÛÛŒÙ„ÛŒ
    // =========================
    if (_containsAny(q, [
      'Ù¾ÛÛŒÙ„ÛŒ',
      'Ø­Ù„ Ú©Ø±ÛŒÚº',
      'Ù…Ù†Ø·Ù‚',
      'logic',
      'Ù…ØµØ§ÙØ­Û',
      'Ø§ÙØ±Ø§Ø¯',
      'Ú¯Ú¾Ú‘ÛŒ',
      'Ø²Ø§ÙˆÛŒÛ'
    ])) {
      return CPUIntent.puzzle;
    }

    // =========================
    // 5ï¸âƒ£ ÛÙ„Ú©Ø§ ÙÙ„Ø³ÙÛ
    // =========================
    if (_containsAny(q, [
      'Ú©Ø§Ø¦Ù†Ø§Øª',
      'Ø±Ø§Ø²',
      'ÙˆØ¬ÙˆØ¯',
      'Ø­Ù‚ÛŒÙ‚Øª',
      'Ø²Ù†Ø¯Ú¯ÛŒ',
      'Ù…ÙˆØª',
      'Ø±ÙˆØ­',
      'Ø¹Ù‚Ù„'
    ])) {
      return CPUIntent.logic;
    }

    // =========================
    // 6ï¸âƒ£ Ø¨Ø§Ù‚ÛŒ Ø³Ø¨
    // =========================
    return CPUIntent.general;
  }

  // ğŸ”§ helper
  bool _containsAny(String text, List<String> keys) {
    for (final key in keys) {
      if (text.contains(key)) return true;
    }
    return false;
  }
}
